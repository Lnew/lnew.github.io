"use strict";if("undefined"==typeof jQuery)throw new Error("请先加载jQuery插件！");var playerInit=function(){var e=window.playerStyleLoaded||!1,t=localStorage.getItem("isLoad"),a=localStorage.getItem("lastFeed");if(t=(t=void 0!==t&&"true"===t)&&void 0!==a&&(new Date).getTime()-parseInt(a)<2e3,top.location===self.location&&!t){localStorage.setItem("isLoad","true"),e||($("head").append('<link rel="stylesheet" type="text/css" href="/js/player/player.css">'),$("head").append('<script src="/js/player/player.js"><\/script>'),$("head").append('<script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"><\/script>'),window.playerStyleLoaded=!0),$("body").append('<div id="aplayer"></div>');var i,o=new APlayer({container:document.getElementById("aplayer"),fixed:1,autoplay:!1,theme:"#F8C302",loop:"all",order:"list",lrcType:3,listMaxHeight:"350px",audio:[]}),n=$('<div id="search" class="input-group"><span class="input-group-addon"><select class="" name="source"><option value="netease">网易云</option><option value="tencent">QQ音乐</option><option value="xiami">虾米</option><option value="kugou">酷狗</option><option value="baidu">百度</option></select></span><input type="text" class="form-control" name="name" style="box-sizing:border-box" placeholder="搜索歌手，歌名，专辑"><span class="input-group-btn"><button id="music_search" class="btn btn-primary" type="button">搜索</button></span></div>');$(document).on("click",".aplayer-miniswitcher",function(){$("#aplayer").hasClass("aplayer-narrow")?n.remove():(n.hide().prependTo($(".aplayer-body")).fadeIn("slow"),$(".aplayer-list").css("margin-bottom","105px"))}),$(document).on("click","#music_search",function(){var e=$('select[name="source"]').val(),t=$('input[name="name"]').val();t&&r(t,"search",e)}),o.on("play",function(){o.storage.set("index",o.list.index);var e=o.list.audios[o.list.index].name+"-"+o.list.audios[o.list.index].artist;void 0!==i&&clearInterval(i),function(e){i=setInterval(function(){e=e.substring(1,e.length)+e.substring(0,1),document.title=e},500)}(e)});var s=o.storage.get("musicList")||null;s?(o.list.add(s),o.list.switch(o.storage.get("index"))):r("778066540","playlist","xiami")}function r(e,t,a){$.ajax({url:"https://api.i-meto.com/meting/api",type:"GET",data:{id:e,type:t,server:a},dataType:"json",success:function(e){o.list.clear(),o.list.add(e),o.storage.set("musicList",e)},error:function(e,t,a){console.error(e+t+a)}})}};playerInit();